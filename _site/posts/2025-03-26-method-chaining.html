<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>aphonic.org - A Little DX with Method Chaining</title>
  <link rel="stylesheet" href="../css/default.css" />
  <link rel="stylesheet" href="../css/syntax.css" />
  <script src="../js/syntax.js" defer></script>
</head>

<body>
  <header>
    <div class="logo">
      <a href="../"><span>A</span>phonic</a>
    </div>
    <nav>
      <a href="../">Home</a>
      <a href="../portfolio.html">Portfolio</a>
      <a href="../archive.html">Archive</a>
      <a href="../resume.html" target="_blank">
        Resume
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
          <path d="M6.22 8.72a.75.75 0 0 0 1.06 1.06l5.22-5.22v1.69a.75.75 0 0 0 1.5 0v-3.5a.75.75 0 0 0-.75-.75h-3.5a.75.75 0 0 0 0 1.5h1.69L6.22 8.72Z"></path>
          <path d="M3.5 6.75c0-.69.56-1.25 1.25-1.25H7A.75.75 0 0 0 7 4H4.75A2.75 2.75 0 0 0 2 6.75v4.5A2.75 2.75 0 0 0 4.75 14h4.5A2.75 2.75 0 0 0 12 11.25V9a.75.75 0 0 0-1.5 0v2.25c0 .69-.56 1.25-1.25 1.25h-4.5c-.69 0-1.25-.56-1.25-1.25v-4.5Z"></path>
        </svg>

      </a>
    </nav>
  </header>

  <main role="main">
    <h1>A Little DX with Method Chaining</h1>
    <article>
    <section class="header">
        Posted on March 26, 2025
        
    </section>
    <section>
        <p>Developer Experience (DX or DevEx) is to engineers what User Experience (UX) is
to users, and it’s something I’m very passionate about. It’s why I spend so much
time iterating on APIs when designing libraries. I did that a bit yesterday and
decided to improve the UX of the <code>Renderable</code> class of my game engine yesterday.</p>
<!--more-->
<p>As of yesterday, you could change the translation, rotation, and scale of an
object in a sequential manner:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode typescript not-numbered"><code class="sourceCode typescript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> blueSquare <span class="op">=</span> <span class="kw">new</span> <span class="fu">Renderalbe</span>()</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>blueSquare<span class="op">.</span><span class="at">position</span> <span class="op">=</span> [<span class="dv">20</span><span class="op">,</span> <span class="dv">60</span>]<span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>blueSquare<span class="op">.</span><span class="at">rotationRad</span> <span class="op">=</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>blueSquare<span class="op">.</span><span class="at">scale</span> <span class="op">=</span> [<span class="dv">5</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">;</span></span></code></pre></div>
<p>While I’d eventually like to make things more declarative – you describe what a
<code>Renderable</code> is, rather than what it does – for the moment, I wanted to at least
improve the ergonomics. I decided to implement method chaining. So in addition
to setters and getters:</p>
<div class="sourceCode" id="cb2" data-startFrom="233"><pre class="sourceCode typescript"><code class="sourceCode typescript" style="counter-reset: source-line 232;"><span id="cb2-233"><a href="#cb2-233" aria-hidden="true" tabindex="-1"></a> <span class="kw">get</span> <span class="fu">scale</span>()<span class="op">:</span> vec2 {</span>
<span id="cb2-234"><a href="#cb2-234" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">_transform</span><span class="op">.</span><span class="at">scale</span><span class="op">;</span></span>
<span id="cb2-235"><a href="#cb2-235" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-236"><a href="#cb2-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-237"><a href="#cb2-237" aria-hidden="true" tabindex="-1"></a>  <span class="kw">set</span> <span class="fu">scale</span>(values<span class="op">:</span> <span class="dt">number</span>[]) {</span>
<span id="cb2-238"><a href="#cb2-238" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">_transform</span><span class="op">.</span><span class="at">scale</span> <span class="op">=</span> values<span class="op">;</span></span>
<span id="cb2-239"><a href="#cb2-239" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-240"><a href="#cb2-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-241"><a href="#cb2-241" aria-hidden="true" tabindex="-1"></a>  <span class="kw">get</span> <span class="fu">width</span>() {</span>
<span id="cb2-242"><a href="#cb2-242" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">_transform</span><span class="op">.</span><span class="at">width</span><span class="op">;</span></span>
<span id="cb2-243"><a href="#cb2-243" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-244"><a href="#cb2-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-245"><a href="#cb2-245" aria-hidden="true" tabindex="-1"></a>  <span class="kw">set</span> <span class="fu">width</span>(value<span class="op">:</span> <span class="dt">number</span>) {</span>
<span id="cb2-246"><a href="#cb2-246" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">_transform</span><span class="op">.</span><span class="at">width</span> <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb2-247"><a href="#cb2-247" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-248"><a href="#cb2-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-249"><a href="#cb2-249" aria-hidden="true" tabindex="-1"></a>  <span class="kw">get</span> <span class="fu">height</span>() {</span>
<span id="cb2-250"><a href="#cb2-250" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">_transform</span><span class="op">.</span><span class="at">height</span><span class="op">;</span></span>
<span id="cb2-251"><a href="#cb2-251" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-252"><a href="#cb2-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-253"><a href="#cb2-253" aria-hidden="true" tabindex="-1"></a>  <span class="kw">set</span> <span class="fu">height</span>(value<span class="op">:</span> <span class="dt">number</span>) {</span>
<span id="cb2-254"><a href="#cb2-254" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">_transform</span><span class="op">.</span><span class="at">height</span> <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb2-255"><a href="#cb2-255" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div>
<p>I added a chainable method for resizing:</p>
<div class="sourceCode" id="cb3" data-startFrom="257"><pre class="sourceCode typescript"><code class="sourceCode typescript" style="counter-reset: source-line 256;"><span id="cb3-257"><a href="#cb3-257" aria-hidden="true" tabindex="-1"></a> <span class="fu">resize</span>(width<span class="op">:</span> <span class="dt">number</span><span class="op">,</span> height<span class="op">:</span> <span class="dt">number</span>)<span class="op">:</span> Renderable {</span>
<span id="cb3-258"><a href="#cb3-258" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">scale</span> <span class="op">=</span> [width<span class="op">,</span> height]<span class="op">;</span></span>
<span id="cb3-259"><a href="#cb3-259" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb3-260"><a href="#cb3-260" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div>
<p>I did something similar for rotation and scale, adding <code>rotateRad</code> and <code>move</code>.
With this, the earlier example becomes:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode typescript not-numbered"><code class="sourceCode typescript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> blueSquare <span class="op">=</span> <span class="kw">new</span> <span class="fu">Renderalbe</span>()</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>blueSquare<span class="op">.</span><span class="fu">move</span>(<span class="dv">20</span><span class="op">,</span> <span class="dv">60</span>)<span class="op">.</span><span class="fu">rotateRad</span>(<span class="fl">0.2</span>)<span class="op">.</span><span class="fu">resize</span>(<span class="dv">5</span><span class="op">,</span> <span class="dv">5</span>)<span class="op">;</span></span></code></pre></div>
<p>As an added bonus, this change also addresses the issue I had yesterday when I
was discussing the lack of tuples in TypeScript. That is, with this interface, a
user can’t accidentally pass in too many values for the array that the values
are stored in.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode diff not-numbered"><code class="sourceCode diff"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>const blueSquare = new Renderalbe()</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="st">-blueSquare.position = [20, 60];</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="st">-blueSquare.rotationRad = 0.2;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="st">-blueSquare.scale = [5, 5];</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="va">+blueSquare.move(20, 60).rotateRad(0.2).resize(5, 5);</span></span></code></pre></div>
    </section>
</article>

  </main>
</body>

</html>
